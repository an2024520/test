# 备份并写入新配置
sed -i 's/#ClientAliveInterval.*/ClientAliveInterval 30/' /etc/ssh/sshd_config
sed -i 's/#ClientAliveCountMax.*/ClientAliveCountMax 10/' /etc/ssh/sshd_config
# 针对没有默认行的处理
grep -q "ClientAliveInterval" /etc/ssh/sshd_config || echo "ClientAliveInterval 30" >> /etc/ssh/sshd_config
grep -q "ClientAliveCountMax" /etc/ssh/sshd_config || echo "ClientAliveCountMax 10" >> /etc/ssh/sshd_config
# 重启服务
systemctl restart sshd
echo "SSH 超时限制已放宽，30秒发送一次心跳。"
